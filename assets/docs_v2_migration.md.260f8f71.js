import{_ as e,o as s,c as a,Q as n}from"./chunks/framework.a2f82312.js";const u=JSON.parse('{"title":"Migrating to v2","description":"Migrating to Version 2.0.0","frontmatter":{"title":"Migrating to v2","description":"Migrating to Version 2.0.0","head":[["meta",{"name":"og:description","content":"Migrating to Version 2.0.0"}],["meta",{"name":"og:image","content":"https://jsx.email/og.png"}],["meta",{"name":"og:site_name","content":"JSX email"}],["meta",{"name":"og:title","content":"Migrating to v2"}],["meta",{"name":"og:type","content":"website"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:description","content":"Migrating to Version 2.0.0"}],["meta",{"name":"twitter:image","content":"https://jsx.email/og.png"}],["meta",{"name":"twitter:title","content":"Migrating to v2"}]]},"headers":[],"relativePath":"../../../docs/v2/migration.md","filePath":"../../../docs/v2/migration.md"}'),o={name:"../../../docs/v2/migration.md"},t=n(`<h2 id="migrating-to-version-2-0-0" tabindex="-1">Migrating to Version 2.0.0 <a class="header-anchor" href="#migrating-to-version-2-0-0" aria-label="Permalink to &quot;Migrating to Version 2.0.0&quot;">​</a></h2><p>Version 2.0.0 of <code>jsx-email</code> brings a lot of changes to the package, specifically breaking changes. There are also a whole host of new features.</p><h2 id="new-features" tabindex="-1">New Features <a class="header-anchor" href="#new-features" aria-label="Permalink to &quot;New Features&quot;">​</a></h2><p>Among the new features that our new version ships with are configuration file support, component updates, and plugins. Below you&#39;ll find links to the relevant documentation for each of the new features and component updates:</p><ul><li><a href="/docs/components/background"><code>Background</code></a> ⭐️ New</li><li><a href="/docs/components/button"><code>Button</code></a> Updates</li><li><a href="/docs/components/graph"><code>Graph</code></a> ⭐️ New</li></ul><h3 id="configuration-file-support" tabindex="-1">Configuration File Support <a class="header-anchor" href="#configuration-file-support" aria-label="Permalink to &quot;Configuration File Support&quot;">​</a></h3><p>One request we recieved often was a way to disable the default styles for every component across a render. Many of those requests suggested using a config file or supporting a config file for other reasons. Well, we heard you and we&#39;ve implemented support for that. Configuration files will allow setting properties for rendering in a single location, setting the log level for the rendering process, and specifying plugins.</p><p>Please see the <a href="/docs/core/config">Configuration</a> documentation for more details.</p><h3 id="plugins" tabindex="-1">Plugins! <a class="header-anchor" href="#plugins" aria-label="Permalink to &quot;Plugins!&quot;">​</a></h3><p>Setting <code>jsx-email</code> apart from any other available email templating tool is the availability of plugins. Plugins are meant to run before, during, or after the core rendering process at different stages, and provide functions like minifaction, inlining CSS, and prettifying the output. Plugins do this via new lifecycle hooks, which provide ultimate flexibility for creating a rendering pipeline for your solutions.</p><p>Additionally, the core functionality that was previously within <code>jsx-email</code> for minifying and prettifying have been moved to plugins which ship separately and can easily be excluded from bundles. This is especially useful if running in environments like Cloudflare that have restrictions on what code can execute.</p><p>Please see the <a href="/docs/core/plugins">Plugins</a> documentation for more details.</p><h2 id="breaking-changes" tabindex="-1">Breaking Changes <a class="header-anchor" href="#breaking-changes" aria-label="Permalink to &quot;Breaking Changes&quot;">​</a></h2><p>As with most major releases in the Node ecosystem, this one comes with a few bumps that need attending to when updating.</p><h3 id="named-exports" tabindex="-1">Named Exports <a class="header-anchor" href="#named-exports" aria-label="Permalink to &quot;Named Exports&quot;">​</a></h3><p><code>jsx-email</code> has moved to only supporting <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export#description" target="_blank" rel="noreferrer">named exports</a> from templates. This impacts the template component itself, the template name, and default props values for the preview.</p><p>Default exports (e.g. <code>export default Batman</code>) are extremely common in the React ecosystem. Not so much outside of React. Default exports <a href="https://github.com/rollup/rollup/issues/1078#issuecomment-268286496" target="_blank" rel="noreferrer">were a mistake</a> and negatively impact bundling in the way of tree-shaking, a critical part to modern application bundling.</p><p>If you previous had templates where the exports resembled:</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki slack-dark vp-code-dark"><code><span class="line"><span style="color:#C586C0;">export</span><span style="color:#E6E6E6;"> </span><span style="color:#C586C0;">default</span><span style="color:#E6E6E6;"> </span><span style="color:#569CD6;">function</span><span style="color:#E6E6E6;"> </span><span style="color:#DCDCAA;">MyTemplate</span><span style="color:#E6E6E6;">({ ... }) {</span></span>
<span class="line"><span style="color:#E6E6E6;">  </span><span style="color:#D4D4D4;">...</span></span>
<span class="line"><span style="color:#E6E6E6;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9CDCFE;">MyTemplate</span><span style="color:#E6E6E6;">.</span><span style="color:#9CDCFE;">Name</span><span style="color:#E6E6E6;"> </span><span style="color:#D4D4D4;">=</span><span style="color:#E6E6E6;"> </span><span style="color:#CE9178;">&#39;MyTemplate&#39;</span><span style="color:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9CDCFE;">MyTemplate</span><span style="color:#E6E6E6;">.</span><span style="color:#9CDCFE;">PreviewProps</span><span style="color:#E6E6E6;"> </span><span style="color:#D4D4D4;">=</span><span style="color:#E6E6E6;"> { </span><span style="color:#D4D4D4;">...</span><span style="color:#E6E6E6;"> };</span></span></code></pre><pre class="shiki slack-ochin vp-code-light"><code><span class="line"><span style="color:#7B30D0;">export</span><span style="color:#002339;"> </span><span style="color:#7B30D0;">default</span><span style="color:#002339;"> </span><span style="color:#0991B6;">function</span><span style="color:#002339;"> </span><span style="color:#7EB233;">MyTemplate</span><span style="color:#002339;">({ ... }) {</span></span>
<span class="line"><span style="color:#002339;">  </span><span style="color:#7B30D0;">...</span></span>
<span class="line"><span style="color:#002339;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#2F86D2;">MyTemplate</span><span style="color:#002339;">.</span><span style="color:#2F86D2;">Name</span><span style="color:#002339;"> </span><span style="color:#7B30D0;">=</span><span style="color:#002339;"> </span><span style="color:#A44185;">&#39;MyTemplate&#39;</span><span style="color:#002339;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#2F86D2;">MyTemplate</span><span style="color:#002339;">.</span><span style="color:#2F86D2;">PreviewProps</span><span style="color:#002339;"> </span><span style="color:#7B30D0;">=</span><span style="color:#002339;"> { </span><span style="color:#7B30D0;">...</span><span style="color:#002339;"> };</span></span></code></pre></div><p>That would be refactored like so:</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki slack-dark vp-code-dark"><code><span class="line"><span style="color:#C586C0;">export</span><span style="color:#E6E6E6;"> </span><span style="color:#569CD6;">const</span><span style="color:#E6E6E6;"> </span><span style="color:#9CDCFE;">previewProps</span><span style="color:#E6E6E6;"> </span><span style="color:#D4D4D4;">=</span><span style="color:#E6E6E6;"> { </span><span style="color:#D4D4D4;">...</span><span style="color:#E6E6E6;"> };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;">// Displayed in the navigation of the Preview app</span></span>
<span class="line"><span style="color:#C586C0;">export</span><span style="color:#E6E6E6;"> </span><span style="color:#569CD6;">const</span><span style="color:#E6E6E6;"> </span><span style="color:#9CDCFE;">templateName</span><span style="color:#E6E6E6;"> </span><span style="color:#D4D4D4;">=</span><span style="color:#E6E6E6;"> </span><span style="color:#CE9178;">&#39;MyTemplate&#39;</span><span style="color:#E6E6E6;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0;">export</span><span style="color:#E6E6E6;"> </span><span style="color:#569CD6;">const</span><span style="color:#E6E6E6;"> </span><span style="color:#DCDCAA;">Template</span><span style="color:#E6E6E6;"> </span><span style="color:#D4D4D4;">=</span><span style="color:#E6E6E6;"> ({ ... }) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#E6E6E6;"> {</span></span>
<span class="line"><span style="color:#E6E6E6;">  </span><span style="color:#D4D4D4;">...</span></span>
<span class="line"><span style="color:#E6E6E6;">};</span></span></code></pre><pre class="shiki slack-ochin vp-code-light"><code><span class="line"><span style="color:#7B30D0;">export</span><span style="color:#002339;"> </span><span style="color:#0991B6;">const</span><span style="color:#002339;"> </span><span style="color:#2F86D2;">previewProps</span><span style="color:#002339;"> </span><span style="color:#7B30D0;">=</span><span style="color:#002339;"> { </span><span style="color:#7B30D0;">...</span><span style="color:#002339;"> };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#357B42;font-style:italic;">// Displayed in the navigation of the Preview app</span></span>
<span class="line"><span style="color:#7B30D0;">export</span><span style="color:#002339;"> </span><span style="color:#0991B6;">const</span><span style="color:#002339;"> </span><span style="color:#2F86D2;">templateName</span><span style="color:#002339;"> </span><span style="color:#7B30D0;">=</span><span style="color:#002339;"> </span><span style="color:#A44185;">&#39;MyTemplate&#39;</span><span style="color:#002339;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7B30D0;">export</span><span style="color:#002339;"> </span><span style="color:#0991B6;">const</span><span style="color:#002339;"> </span><span style="color:#7EB233;">Template</span><span style="color:#002339;"> </span><span style="color:#7B30D0;">=</span><span style="color:#002339;"> ({ ... }) </span><span style="color:#0991B6;">=&gt;</span><span style="color:#002339;"> {</span></span>
<span class="line"><span style="color:#002339;">  </span><span style="color:#7B30D0;">...</span></span>
<span class="line"><span style="color:#002339;">};</span></span></code></pre></div><p>For consistency, only the template is Capital-cased to indicate that it&#39;s a template. This ditches an odd design choice that we inherited from react-email when we forked, and gets us to a place with template exports that moreso match the ecosystem norms, and simplifies the process of asserting that a template has what we need to render it.</p><p>Importing templates would then resemble:</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki slack-dark vp-code-dark"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#E6E6E6;"> { </span><span style="color:#9CDCFE;">Template</span><span style="color:#E6E6E6;"> } </span><span style="color:#C586C0;">from</span><span style="color:#E6E6E6;"> </span><span style="color:#CE9178;">&#39;./template&#39;</span><span style="color:#E6E6E6;">;</span></span></code></pre><pre class="shiki slack-ochin vp-code-light"><code><span class="line"><span style="color:#7B30D0;">import</span><span style="color:#002339;"> { </span><span style="color:#2F86D2;">Template</span><span style="color:#002339;"> } </span><span style="color:#7B30D0;">from</span><span style="color:#002339;"> </span><span style="color:#A44185;">&#39;./template&#39;</span><span style="color:#002339;">;</span></span></code></pre></div><p>And in the case where multiple templates are being imported in the same module, import aliases would need to be used:</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki slack-dark vp-code-dark"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#E6E6E6;"> { </span><span style="color:#9CDCFE;">Template</span><span style="color:#E6E6E6;"> </span><span style="color:#C586C0;">as</span><span style="color:#E6E6E6;"> </span><span style="color:#9CDCFE;">BatmanTemplate</span><span style="color:#E6E6E6;"> } </span><span style="color:#C586C0;">from</span><span style="color:#E6E6E6;"> </span><span style="color:#CE9178;">&#39;./batman&#39;</span><span style="color:#E6E6E6;">;</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#E6E6E6;"> { </span><span style="color:#9CDCFE;">Template</span><span style="color:#E6E6E6;"> </span><span style="color:#C586C0;">as</span><span style="color:#E6E6E6;"> </span><span style="color:#9CDCFE;">JokerTemplate</span><span style="color:#E6E6E6;"> } </span><span style="color:#C586C0;">from</span><span style="color:#E6E6E6;"> </span><span style="color:#CE9178;">&#39;./joker&#39;</span><span style="color:#E6E6E6;">;</span></span></code></pre><pre class="shiki slack-ochin vp-code-light"><code><span class="line"><span style="color:#7B30D0;">import</span><span style="color:#002339;"> { </span><span style="color:#2F86D2;">Template</span><span style="color:#002339;"> </span><span style="color:#7B30D0;">as</span><span style="color:#002339;"> </span><span style="color:#2F86D2;">BatmanTemplate</span><span style="color:#002339;"> } </span><span style="color:#7B30D0;">from</span><span style="color:#002339;"> </span><span style="color:#A44185;">&#39;./batman&#39;</span><span style="color:#002339;">;</span></span>
<span class="line"><span style="color:#7B30D0;">import</span><span style="color:#002339;"> { </span><span style="color:#2F86D2;">Template</span><span style="color:#002339;"> </span><span style="color:#7B30D0;">as</span><span style="color:#002339;"> </span><span style="color:#2F86D2;">JokerTemplate</span><span style="color:#002339;"> } </span><span style="color:#7B30D0;">from</span><span style="color:#002339;"> </span><span style="color:#A44185;">&#39;./joker&#39;</span><span style="color:#002339;">;</span></span></code></pre></div><h3 id="button-updates" tabindex="-1"><code>Button</code> Updates <a class="header-anchor" href="#button-updates" aria-label="Permalink to &quot;\`Button\` Updates&quot;">​</a></h3><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Please see the separate <a href="/docs/v2/button">migration guide for <code>Button</code></a> for additional usage and comparison to the v1 <code>Button</code>.</p></div><p>The <a href="/docs/components/button"><code>Button</code></a> component received a mountain of updates thanks to <a href="https://github.com/lordelogos" target="_blank" rel="noreferrer">@lordelogos</a>. Amoung the updates was a complete refactoring of the component source and the HTML that it generates. This was done to address nagging and persistent issues with rendering buttons effectively across many clients. No surprise, Outlook was the worst offender. While these updates provide a lot of new props, the <code>Button</code> component remains backwards compatible in most situations.</p><p>However, one big potentially breaking change is around the <code>style</code> property. If you&#39;re using the <code>style</code> or <code>class</code> properties to style your buttons, there may be some visual differences. The updates to <code>Button</code> provide direct props for most of the styles that we&#39;ve seen people use on buttons, in an effort to get to maximum compatibility across email clients. <em>This is something you won&#39;t find in other email templating tools!</em> Please see the <a href="/docs/components/button#component-props">props</a> documentation for more info.</p><p>All that said, if the upgrade is too much heavy lifting, we&#39;re shipping the deprecated <code>Butan</code> and cheeky component which provides a fast find-and-replace path for continuing to use the original <code>Button</code> component. This component won&#39;t be documented beyond mentioning the legacy behavior and rendering, and will be removed in the next major version.</p><h3 id="preview-updates" tabindex="-1">Preview Updates <a class="header-anchor" href="#preview-updates" aria-label="Permalink to &quot;Preview Updates&quot;">​</a></h3><p>We&#39;ve made a lot of changes to how the preview works, which should ultimately make it faster and more flexible. Rather than running the <code>render</code> within the preview&#39;s web app at runtime, we&#39;re pre-rendering and providing the output to the preview app. We&#39;re also running a watcher behind the scenes so if the preview app is running and a template is updated, those updates are immediately shown within the preview app. This works <em>faster and more reliably</em>, and removes dependency restrictions and optimization issues that Vite would frequently complain about.</p><p>One downside to these updates, which is a breaking change, is that local, relative imports of assets (like images) into the templates aren&#39;t working. This was something that was enabled by some behavior in Vite that we were leveraging to make that possible. Unfortunately, that mechanism no longer works with the new rendering pipeline. <em>We are actively working on restoring that capability!</em></p><p>On the flip side, we&#39;ve add the ability to exclude files from the preview app, which was often requested.</p><h2 id="esm-cjs-exports" tabindex="-1">ESM / CJS Exports <a class="header-anchor" href="#esm-cjs-exports" aria-label="Permalink to &quot;ESM / CJS Exports&quot;">​</a></h2><p>We&#39;ve moved to <a href="https://github.com/isaacs/tshy" target="_blank" rel="noreferrer"><code>tshy</code></a> for building the packages. We&#39;ve done <em>a lot</em> of testing to try and ensure the export changes don&#39;t cause any unintended side-effects. That said, if you run into any, please <a href="https://github.com/shellscape/jsx-email/issues/new/choose" target="_blank" rel="noreferrer">open an issue</a>.</p>`,37),p=[t];function l(r,i,c,d,h,y){return s(),a("div",null,p)}const g=e(o,[["render",l]]);export{u as __pageData,g as default};
